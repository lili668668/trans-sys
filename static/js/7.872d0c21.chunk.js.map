{"version":3,"sources":["components/AddCircleButton.js","components/FormDialog.js","utils/tools.js","pages/Group/AddDialog.js","pages/Group/ProjectCard.js","pages/Group/Page.js","pages/Group/index.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_2__","_material_ui_icons_AddCircleOutline__WEBPACK_IMPORTED_MODULE_3__","_material_ui_icons_AddCircleOutline__WEBPACK_IMPORTED_MODULE_3___default","AddCircleButton","_ref","title","onClick","a","createElement","_material_ui_core_Dialog__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_DialogActions__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_DialogContent__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core_DialogTitle__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_5__","FormDialog","props","message","confirmText","cancelText","open","onClose","onSubmit","children","event","preventDefault","color","type","defaultProps","linkArray","array","idKey","nextKey","start","newArray","pointerItem","find","item","findPointerItme","undefined","push","trimObjectValues","object","Object","keys","map","key","_home_ballfish_translation_system_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","trim","reduce","collection","assign","useStyles","makeStyles","theme","fileInput","display","AddDialog","label","value","onFormChange","classses","_useState","useState","_useState2","slicedToArray","filename","setFilename","fileRef","React","createRef","react_default","Box","flexDirection","mt","TextField","autoFocus","fullWidth","name","onChange","objectSpread","defineProperty","target","required","alignItems","disabled","Button","current","click","file","files","reader","FileReader","onload","e","csvtojson","fromString","result","then","rawRows","languages","filter","metas","rows","sortBy","row","id","uniqid","index","length","canExport","next","content","readAsText","className","accept","ref","useCardStyles","marginLeft","spacing","marginRight","ProjectCard","project","match","useReactRouter","classes","Card","CardContent","Typography","gutterBottom","variant","component","justifyContent","CardActions","size","Link","to","PROJECT_FN","groupId","params","projectId","Page","_useReactRouter","history","firebase","useFirebase","isLoading","setIsLoading","_useState3","_useState4","group","setGroup","_useState5","_useState6","groupSteam","setGroupSteam","_useState7","_useState8","openAddDialog","setOpenAddDialog","_useState9","_useState10","form","setForm","projects","values","handleClose","useEffect","steam","refGroup","on","snap","exists","val","off","LoadingPage","flexWrap","p","m","Group_ProjectCard","Group_AddDialog","now","Date","toString","child","concat","set","createdTime","refProjectContents","d","__webpack_exports__","Group_Page"],"mappings":"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","file":"static/js/7.872d0c21.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport IconButton from '@material-ui/core/IconButton'\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline'\n\nconst AddCircleButton = ({ title, onClick }) => (\n  <Tooltip title={title}>\n    <IconButton onClick={onClick}>\n      <AddCircleOutline />\n    </IconButton>\n  </Tooltip>\n)\n\nAddCircleButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired\n}\n\nexport default AddCircleButton\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Button from '@material-ui/core/Button'\n\nconst FormDialog = (props) => {\n  const {\n    message,\n    confirmText,\n    cancelText,\n    open,\n    onClose,\n    onSubmit,\n    children\n  } = props\n\n  const handleSubmit = (event) => {\n    onSubmit(event)\n    event.preventDefault()\n  }\n\n  return (\n    <Dialog open={open} onClose={onClose}>\n      <DialogTitle>{message}</DialogTitle>\n      <form onSubmit={handleSubmit}>\n        <DialogContent>\n          {children}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onClose} color=\"primary\">\n            {cancelText}\n          </Button>\n          <Button type=\"submit\" color=\"primary\">\n            {confirmText}\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  )\n}\n\n\nFormDialog.propTypes = {\n  message: PropTypes.string,\n  confirmText: PropTypes.string,\n  cancelText: PropTypes.string,\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n}\n\nFormDialog.defaultProps = {\n  message: '',\n  confirmText: '是的',\n  cancelText: '取消'\n}\n\nexport default FormDialog\n","export const linkArray = (array, idKey, nextKey, start) => {\n  const newArray = []\n  let pointerItem = array.find(item => item[idKey] === start)\n  const findPointerItme = item => item[idKey] === pointerItem[nextKey]\n  while (pointerItem !== undefined && pointerItem[nextKey] !== undefined) {\n    newArray.push(pointerItem)\n    pointerItem = array.find(findPointerItme)\n  }\n  if (pointerItem !== undefined) newArray.push(pointerItem)\n  return newArray\n}\n\nexport const trimObjectValues = (object) => {\n  return Object.keys(object)\n    .map(key => ({ [key]: object[key].trim() }))\n    .reduce((collection, item) => Object.assign({}, collection, item), {})\n}\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport csvtojson from 'csvtojson'\nimport uniqid from 'uniqid'\nimport sortBy from 'lodash-es/sortBy'\nimport { makeStyles } from '@material-ui/styles'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Box from '@material-ui/core/Box'\nimport FormDialog from '../../components/FormDialog'\nimport { trimObjectValues } from '../../utils/tools'\n\nconst useStyles = makeStyles((theme) => ({\n  fileInput: {\n    display: 'none'\n  }\n}))\n\nconst AddDialog = ({ value, onFormChange, open, onClose, onSubmit }) => {\n  const classses = useStyles()\n  const [filename, setFilename] = useState('')\n  const fileRef = React.createRef()\n  const handleChange = (label) => (event) => onFormChange({ ...value, [label]: event.target.value })\n  const handleImportFile = (event) => {\n    const file = event.target.files[0]\n    const reader = new FileReader()\n    reader.onload = (e) => {\n      csvtojson()\n        .fromString(e.target.result)\n        .then((rawRows) => {\n          const languages = Object.keys(rawRows[0]).filter(key => key !== 'key')\n          let start = undefined\n          let metas = {}\n          const rows = sortBy(rawRows, 'key')\n            .map(row => trimObjectValues({ ...row, id: uniqid() }))\n            .reduce((collection, row, index, array) => {\n              if (start === undefined) {\n                start = row.id\n              }\n              if (index === array.length - 1) {\n                metas = { ...metas, [row.id]: { id: row.id, canExport: true } }\n              } else {\n                metas = { ...metas, [row.id]: { id: row.id, next: array[index + 1].id, canExport: true } }\n              }\n              return Object.assign({}, collection, { [row.id]: row })\n            }, {})\n          onFormChange({ ...value, content: { start, languages, rows, metas } })\n        })\n    }\n    reader.readAsText(file)\n    setFilename(file.name)\n  }\n  const handleClose = () => {\n    setFilename('')\n    onClose()\n  }\n  const handleSubmit = () => {\n    setFilename('')\n    onSubmit()\n  }\n  return (\n    <FormDialog\n      message=\"新增專案\"\n      confirmText=\"新增\"\n      cancelText=\"取消\"\n      open={open}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n    >\n      <Box display=\"flex\" flexDirection=\"column\">\n        <Box mt={1}>\n          <TextField\n            autoFocus\n            fullWidth\n            label=\"專案名稱\"\n            value={value.name}\n            onChange={handleChange('name')}\n            required\n          />\n        </Box>\n        <Box mt={1} display=\"flex\" flexDirection=\"row\" alignItems=\"flex-end\">\n          <TextField\n            disabled\n            label=\"檔案路徑\"\n            value={filename}\n            required\n          />\n          <Button onClick={() => fileRef.current.click()}>匯入檔案</Button>\n          <input\n            onChange={handleImportFile}\n            className={classses.fileInput}\n            type=\"file\"\n            accept=\".csv\"\n            ref={fileRef}\n          />\n        </Box>\n      </Box>\n    </FormDialog>\n  )\n}\n\nAddDialog.propTypes = {\n  value: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    content: PropTypes.shape({\n      start: PropTypes.string.isRequired,\n      languages: PropTypes.arrayOf(PropTypes.string).isRequired,\n      rows: PropTypes.object.isRequired,\n      metas: PropTypes.object.isRequired\n    }).isRequired\n  }).isRequired,\n  onFormChange: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n}\n\nexport default AddDialog\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport useReactRouter from 'use-react-router'\nimport { makeStyles } from '@material-ui/styles'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardActions from '@material-ui/core/CardActions'\nimport Button from '@material-ui/core/Button'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport { PROJECT_FN } from '../pathnames'\n\nconst useCardStyles = makeStyles((theme) => ({\n  content: {\n    marginLeft: theme.spacing(10),\n    marginRight: theme.spacing(10)\n  }\n}))\n\nconst ProjectCard = ({ project }) => {\n  const { match } = useReactRouter()\n  const classes = useCardStyles()\n  return (\n    <Card>\n      <CardContent className={classes.content}>\n        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n          {project.name}\n        </Typography>\n      </CardContent>\n      <Box display=\"flex\" justifyContent=\"center\">\n        <CardActions>\n          <Button\n            size=\"small\"\n            color=\"primary\"\n            component={Link}\n            to={PROJECT_FN({ groupId: match.params.id, projectId: project.id })}\n          >\n            進入專案\n          </Button>\n        </CardActions>\n      </Box>\n    </Card>\n  )\n}\n\nProjectCard.propTypes = {\n  project: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  }).isRequired\n}\n\nexport default ProjectCard\n","import React, { useState, useEffect } from 'react'\nimport sortBy from 'lodash-es/sortBy'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport useReactRouter from 'use-react-router'\nimport useFirebase from '../../firebase/useFirebase'\nimport LoadingPage from '../../components/LoadingPage'\nimport AddCircleButton from '../../components/AddCircleButton'\nimport AddDialog from './AddDialog'\nimport ProjectCard from './ProjectCard'\nimport uniqid from 'uniqid'\n\nconst defaultForm = () => ({\n  name: '未命名',\n  content: {\n    start: '',\n    languages: [],\n    rows: {},\n    metas: {}\n  }\n})\n\nconst Page = () => {\n  const { match, history } = useReactRouter()\n  const firebase = useFirebase()\n  const [isLoading, setIsLoading] = useState(true)\n  const [group, setGroup] = useState({})\n  const [groupSteam, setGroupSteam] = useState()\n  const [openAddDialog, setOpenAddDialog] = useState(false)\n  const [form, setForm] = useState(defaultForm())\n  const projects = group.projects ? sortBy(Object.values(group.projects), 'createdTime') : []\n\n  const handleClose = () => {\n    setOpenAddDialog(false)\n    setForm(defaultForm())\n  }\n\n  const handleSubmit = () => {\n    const projectId = uniqid()\n    const now = (new Date()).toString()\n    firebase.refGroup({ id: group.id })\n      .child(`projects/${projectId}`)\n      .set({\n        id: projectId,\n        name: form.name,\n        createdTime: now\n      })\n      .then(() => {\n        firebase.refProjectContents({ id: projectId })\n          .set(form.content)\n      })\n    handleClose()\n  }\n\n  useEffect(() => {\n    const steam = firebase.refGroup({ id: match.params.id })\n\n    steam.on('value', (snap) => {\n      if (!snap.exists()) {\n        history.push('/no-content')\n        return\n      }\n      setGroup(snap.val())\n      if(isLoading) setIsLoading(false)\n    })\n\n    if (groupSteam === undefined) setGroupSteam(groupSteam)\n\n    return () => {\n      if (steam !== undefined) steam.off()\n    }\n  // eslint-disable-next-line\n  }, [groupSteam])\n\n  if (isLoading) return (<LoadingPage />)\n\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection=\"row\"\n      flexWrap=\"wrap\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      p={5}\n    >\n      {projects.length !== 0 ? projects.map((project) => (\n        <Box key={project.id} m={2}>\n          <ProjectCard project={project} />\n        </Box>\n      )) : (\n        <Box m={1}>\n          <Typography variant=\"h6\">沒有專案</Typography>\n        </Box>\n      )}\n      <AddCircleButton title=\"新增專案\" onClick={() => setOpenAddDialog(true)} />\n      <AddDialog value={form} onFormChange={setForm} open={openAddDialog} onClose={handleClose} onSubmit={handleSubmit} />\n    </Box>\n  )\n}\n\nexport default Page\n","export { default } from './Page'\n"],"sourceRoot":""}