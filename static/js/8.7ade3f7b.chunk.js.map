{"version":3,"sources":["utils/tools.js","pages/Project/components/TableComponent.js","pages/Project/components/CellComponent.js","pages/Project/components/RowComponent.js","pages/Project/components/FilterCellComponent.js","pages/Project/components/EditCellComponent.js","utils/useMultiKeyPress.js","pages/Project/components/CommandComponent.js","pages/Project/plugins/PointerState.js","pages/Project/plugins/KeyboardController.js","pages/Project/Page.js","pages/Project/index.js"],"names":["linkArray","array","idKey","nextKey","start","newArray","pointerItem","find","item","findPointerItme","undefined","push","trimObjectValues","object","Object","keys","map","key","_home_ballfish_translation_system_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","trim","reduce","collection","assign","useStyles","makeStyles","theme","striped","& tbody tr:nth-of-type(odd)","backgroundColor","grey","TableComponent","props","classes","react_default","a","createElement","dx_react_grid_material_ui_es","Table","className","cell","padding","duplicate","paddingLeft","pink","width","height","pointed","purple","button","CellComponent","_ref","onDuplicateCellClick","objectWithoutProperties","dx_react_core_es","_ref2","tableBodyRows","pointer","bodyRow","row","filter","id","column","name","includes","value","isPointed","TableCell","ButtonBase","onClick","Cell","concat","blue","RowComponent","tableRow","changePointer","rowId","Row","border","borderBottom","root","closeButton","FilterCellComponent","onFilter","Box","display","flexDirection","alignItems","flexGrow","Tooltip","title","IconButton","Cancel_default","inputRoot","inputRight","textAlign","inputCenter","EditCellComponent","_classNames","editingEnabled","onValueChange","tableColumn","inputClasses","classNames","defineProperty","align","Input","multiline","input","disabled","onChange","e","target","autoFocus","useMultiKeyPress","onKeysPressed","keysPressed","downHandler","event","union","upHandler","keyPressed","useEffect","window","addEventListener","removeEventListener","AddButton","onExecute","AddCircleOutline_default","EditButton","Edit_default","DeleteButton","_ref3","Delete_default","CommitButton","_ref4","Save_default","CancelButton","_ref5","CommandComponent","_ref6","Component","add","edit","delete","commit","cancel","PointerState","onPointerChange","action","Controller","editingRowIds","addRow","startEditRows","deleteRows","commitDeletedRows","pointerIndex","findIndex","length","preventDefault","rowIds","KeyboardController","KeyboardController_Controller","Page","_useReactRouter","useReactRouter","match","history","firebase","useFirebase","_useState","useState","_useState2","slicedToArray","isLoading","setIsLoading","_useState3","_useState4","project","setProject","_useState5","languages","rows","metas","_useState6","content","setContent","_useState7","_useState8","projectStream","setProjectSteam","_useState9","_useState10","contentSteam","setContentSteam","_useState11","_useState12","filters","setFilters","_useState13","_useState14","setPointer","steam","refGroup","params","groupId","child","projectId","on","snap","exists","val","off","refProjectContents","columns","lng","values","meta","columnName","operation","LoadingPage","getRowId","plugins_PointerState","dx_react_grid_es","onCommitChanges","added","changed","deleted","ref","sortBy","forEach","index","uniqid","set","canExport","next","objectSpread","deletedSet","Set","has","then","remove","prevId","onFiltersChange","tableComponent","cellComponent","components_CellComponent","rowComponent","showFilterSelector","showAddCommand","showEditCommand","showDeleteCommand","commandComponent","plugins_KeyboardController","__webpack_require__","d","__webpack_exports__","Project_Page"],"mappings":"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","file":"static/js/8.7ade3f7b.chunk.js","sourcesContent":["export const linkArray = (array, idKey, nextKey, start) => {\n  const newArray = []\n  let pointerItem = array.find(item => item[idKey] === start)\n  const findPointerItme = item => item[idKey] === pointerItem[nextKey]\n  while (pointerItem !== undefined && pointerItem[nextKey] !== undefined) {\n    newArray.push(pointerItem)\n    pointerItem = array.find(findPointerItme)\n  }\n  if (pointerItem !== undefined) newArray.push(pointerItem)\n  return newArray\n}\n\nexport const trimObjectValues = (object) => {\n  return Object.keys(object)\n    .map(key => ({ [key]: object[key].trim() }))\n    .reduce((collection, item) => Object.assign({}, collection, item), {})\n}\n","import React from 'react'\nimport { VirtualTable } from '@devexpress/dx-react-grid-material-ui';\nimport { makeStyles } from '@material-ui/styles'\nimport grey from '@material-ui/core/colors/grey'\n\nconst useStyles = makeStyles((theme) => ({\n  striped: {\n    '& tbody tr:nth-of-type(odd)': {\n      backgroundColor: grey[100],\n    }\n  }\n}))\n\nconst TableComponent = (props) => {\n  const classes = useStyles()\n  return (\n    <VirtualTable.Table {...props} className={classes.striped} />\n  )\n}\n\nexport default TableComponent\n","import React from 'react'\nimport { TemplateConnector } from '@devexpress/dx-react-core'\nimport { VirtualTable } from '@devexpress/dx-react-grid-material-ui'\nimport { makeStyles } from '@material-ui/styles'\nimport pink from '@material-ui/core/colors/pink'\nimport purple from '@material-ui/core/colors/purple'\nimport ButtonBase from '@material-ui/core/ButtonBase'\nimport TableCell from '@material-ui/core/TableCell'\n\nconst useStyles = makeStyles((theme) => ({\n  cell: {\n    padding: 0\n  },\n  duplicate: {\n    paddingLeft: `8px !important`,\n    backgroundColor: pink[50],\n    width: '100%',\n    height: '100%'\n  },\n  pointed: {\n    paddingLeft: `8px !important`,\n    backgroundColor: purple[50],\n    width: '100%',\n    height: '100%'\n  },\n  button: {\n    width: '100%',\n    height: '100%'\n  }\n}))\n\nconst CellComponent = ({ onDuplicateCellClick, ...props }) => {\n  const classes = useStyles()\n  return (\n    <TemplateConnector>\n      {({ tableBodyRows, pointer }) => {\n        const isDuplicate = tableBodyRows\n          .map(bodyRow => bodyRow.row)\n          .filter(bodyRow => bodyRow.id !== props.row.id)\n          .map(bodyRow => bodyRow[props.column.name])\n          .includes(props.value)\n        if (isDuplicate) {\n          const isPointed = props.row.id === pointer\n          return (\n            <TableCell className={classes.cell}>\n              <ButtonBase className={classes.button} onClick={() => onDuplicateCellClick(props.column.name, props.value)}>\n                <VirtualTable.Cell\n                  {...props}\n                  className={isPointed ? classes.pointed : classes.duplicate}\n                />\n              </ButtonBase>\n            </TableCell>\n          )\n        }\n        return (<VirtualTable.Cell {...props} />)\n      }}\n    </TemplateConnector>\n  )\n}\n\nexport default CellComponent\n","import React from 'react'\nimport { TemplateConnector } from '@devexpress/dx-react-core'\nimport { VirtualTable } from '@devexpress/dx-react-grid-material-ui';\nimport { makeStyles } from '@material-ui/styles'\nimport blue from '@material-ui/core/colors/blue'\n\nconst useStyles = makeStyles((theme) => ({\n  pointed: {\n    backgroundColor: `${blue[50]} !important`,\n  }\n}))\n\nconst RowComponent = (props) => {\n  const { tableRow } = props\n  const classes = useStyles()\n  return (\n    <TemplateConnector>\n      {({ pointer }, { changePointer }) => {\n        if (pointer === tableRow.rowId) {\n          return (<VirtualTable.Row {...props} className={classes.pointed} />)\n        }\n        return (<VirtualTable.Row {...props} onClick={() => changePointer(tableRow.rowId)} />)\n      }}\n    </TemplateConnector>\n  )\n}\n\nexport default RowComponent\n","import React from 'react'\nimport { TableFilterRow } from '@devexpress/dx-react-grid-material-ui'\nimport { makeStyles } from '@material-ui/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport Cancel from '@material-ui/icons/Cancel'\nimport Box from '@material-ui/core/Box'\nimport Tooltip from '@material-ui/core/Tooltip'\n\nconst useStyles = makeStyles((theme) => ({\n  border: {\n    borderBottom: '1px solid rgba(224, 224, 224, 1)'\n  },\n  root: {\n    width: '100%',\n    borderBottom: 0\n  },\n  closeButton: {\n    width: '48px',\n    height: '48px'\n  }\n}))\n\nconst FilterCellComponent = (props) => {\n  const classes = useStyles()\n  const { onFilter } = props\n  return (\n    <th className={classes.border}>\n      <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n        <Box display=\"flex\" flexGrow={1}>\n          <TableFilterRow.Cell {...props} className={classes.root} />\n        </Box>\n        <Tooltip title=\"清除查詢\">\n          <IconButton onClick={() => onFilter(null)} className={classes.closeButton}>\n            <Cancel />\n          </IconButton>\n        </Tooltip>\n      </Box>\n    </th>\n  )\n}\n\nexport default FilterCellComponent\n","import React from 'react'\nimport classNames from 'classnames'\nimport { makeStyles } from '@material-ui/styles'\nimport { TableEditRow } from '@devexpress/dx-react-grid-material-ui'\nimport Input from '@material-ui/core/Input'\n\nconst useStyles = makeStyles((theme) => ({\n  inputRoot: {\n    width: '100%'\n  },\n  inputRight: {\n    textAlign: 'right'\n  },\n  inputCenter: {\n    textAlign: 'center'\n  }\n}))\n\nconst EditCellComponent = (props) => {\n  const classes = useStyles()\n  const { value, editingEnabled, onValueChange, column, tableColumn } = props\n  const inputClasses = classNames({\n    [classes.inputRight]: tableColumn && tableColumn.align === 'right',\n    [classes.inputCenter]: tableColumn && tableColumn.align === 'center'\n  })\n  return (\n    <TableEditRow.Cell {...props}>\n      <Input\n        multiline\n        className={classes.inputRoot}\n        classes={{ input: inputClasses }}\n        value={value || ''}\n        disabled={!editingEnabled}\n        onChange={e => onValueChange(e.target.value)}\n        autoFocus={editingEnabled && column.name === 'key'}\n      />\n    </TableEditRow.Cell>\n  )\n}\n\nexport default EditCellComponent\n","import { useEffect } from 'react'\nimport union from 'lodash-es/union'\n\nexport default function useMultiKeyPress(onKeysPressed) {\n  let keysPressed = []\n\n  const downHandler = (event) => {\n    const { key } = event\n    keysPressed = union(keysPressed, [key])\n    onKeysPressed(keysPressed, event)\n  }\n\n  const upHandler = ({ key }) => {\n    keysPressed = keysPressed.filter(keyPressed => keyPressed !== key)\n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler)\n    window.addEventListener('keyup', upHandler)\n    return () => {\n      window.removeEventListener('keydown', downHandler)\n      window.removeEventListener('keyup', upHandler)\n    }\n  })\n\n  return keysPressed\n}\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline'\nimport Edit from '@material-ui/icons/Edit'\nimport Delete from '@material-ui/icons/Delete'\nimport Save from '@material-ui/icons/Save'\nimport Cancel from '@material-ui/icons/Cancel'\nimport useMultiKeyPress from '../../../utils/useMultiKeyPress'\n\nconst AddButton = ({ onExecute }) => (\n  <Tooltip title=\"新增一條翻譯(快速鍵：Shift + n)\">\n    <IconButton onClick={onExecute}>\n      <AddCircleOutline />\n    </IconButton>\n  </Tooltip>\n)\n\nconst EditButton = ({ onExecute }) => (\n  <Tooltip title=\"修改(快速鍵：Shift + e)\">\n    <IconButton onClick={onExecute}>\n      <Edit />\n    </IconButton>\n  </Tooltip>\n)\n\nconst DeleteButton = ({ onExecute }) => (\n  <Tooltip title=\"刪除(快速鍵：Shift + Delete)\">\n    <IconButton onClick={onExecute}>\n      <Delete />\n    </IconButton>\n  </Tooltip>\n)\n\nconst CommitButton = ({ onExecute }) => {\n  useMultiKeyPress((keys) => {\n    if (keys.includes('Shift') && keys.includes('Enter')) onExecute()\n  })\n  return (\n    <Tooltip title=\"儲存(快速鍵：Shift + Enter)\">\n      <IconButton onClick={onExecute}>\n        <Save />\n      </IconButton>\n    </Tooltip>\n  )\n}\n\nconst CancelButton = ({ onExecute }) => {\n  useMultiKeyPress((keys) => {\n    if (keys.includes('Escape')) onExecute()\n  })\n  return (\n    <Tooltip title=\"取消(快速鍵：Esc)\">\n      <IconButton onClick={onExecute}>\n        <Cancel />\n      </IconButton>\n    </Tooltip>\n  )\n}\n\nconst CommandComponent = ({ id, onExecute }) => {\n  const components = {\n    add: AddButton,\n    edit: EditButton,\n    delete: DeleteButton,\n    commit: CommitButton,\n    cancel: CancelButton\n  }\n  const Component = components[id]\n  return (<Component onExecute={onExecute} />)\n}\n\nexport default CommandComponent\n","import React from 'react'\nimport {\n  Plugin,\n  Getter,\n  Action\n} from '@devexpress/dx-react-core'\n\nconst PointerState = (props) => {\n  const { pointer, onPointerChange } = props\n  return (\n    <Plugin>\n      <Getter name=\"pointer\" value={pointer} />\n      <Action name=\"changePointer\" action={onPointerChange} />\n    </Plugin>\n  )\n}\n\nexport default PointerState\n","import React from 'react'\nimport {\n  Plugin,\n  TemplateConnector\n} from '@devexpress/dx-react-core'\nimport useMultiKeyPress from '../../../utils/useMultiKeyPress'\n\nconst Controller = ({\n  pointer,\n  tableBodyRows,\n  editingRowIds,\n  changePointer,\n  addRow,\n  startEditRows,\n  deleteRows,\n  commitDeletedRows\n}) => {\n  useMultiKeyPress((keys, event) => {\n    const pointerIndex = tableBodyRows.findIndex(bodyRow => bodyRow.row.id === pointer)\n    if (editingRowIds.length !== 0) return\n    if (keys.includes('Shift') && (keys.includes('N') || keys.includes('n'))) {\n      addRow()\n      event.preventDefault()\n      return\n    }\n    if (keys.includes('Shift')\n      && (keys.includes('E') || keys.includes('e'))\n      && pointerIndex !== -1\n    ) {\n      startEditRows({ rowIds: [pointer] })\n      event.preventDefault()\n      return\n    }\n    if (keys.includes('Shift') && keys.includes('Delete') && pointerIndex !== -1) {\n      const length = tableBodyRows.length\n      deleteRows({ rowIds: [pointer] })\n      commitDeletedRows({ rowIds: [pointer] })\n      if (pointerIndex === length - 1) {\n        changePointer(tableBodyRows[0].row.id)\n      } else {\n        changePointer(tableBodyRows[pointerIndex + 1].row.id)\n      }\n      return\n    }\n    if (keys.includes('ArrowUp')) {\n      if (pointerIndex < 0) {\n        changePointer(tableBodyRows[0].row.id)\n      } else if (pointerIndex === 0) {\n        changePointer(tableBodyRows[tableBodyRows.length - 1].row.id)\n      } else {\n        changePointer(tableBodyRows[pointerIndex - 1].row.id)\n      }\n      return\n    }\n    if (keys.includes('ArrowDown')) {\n      if (pointerIndex < 0 || pointerIndex === tableBodyRows.length - 1) {\n        changePointer(tableBodyRows[0].row.id)\n      } else {\n        changePointer(tableBodyRows[pointerIndex + 1].row.id)\n      }\n      return\n    }\n  })\n  return null\n}\n\nconst KeyboardController = () => (\n  <Plugin>\n    <TemplateConnector>\n      {({ pointer, tableBodyRows, editingRowIds }, { changePointer, addRow, startEditRows, deleteRows, commitDeletedRows }) => {\n        return (\n          <Controller\n            pointer={pointer}\n            tableBodyRows={tableBodyRows}\n            editingRowIds={editingRowIds}\n            changePointer={changePointer}\n            addRow={addRow}\n            startEditRows={startEditRows}\n            deleteRows={deleteRows}\n            commitDeletedRows={commitDeletedRows}\n          />\n        )\n      }}\n    </TemplateConnector>\n  </Plugin>\n)\n\nexport default KeyboardController\n","import React, { useState, useEffect } from 'react'\nimport useReactRouter from 'use-react-router'\nimport {\n  EditingState,\n  FilteringState,\n  IntegratedFiltering\n} from '@devexpress/dx-react-grid';\nimport {\n  Grid,\n  VirtualTable,\n  TableHeaderRow,\n  TableEditRow,\n  TableEditColumn,\n  TableFilterRow\n} from '@devexpress/dx-react-grid-material-ui'\nimport TableComponent from './components/TableComponent'\nimport CellComponent from './components/CellComponent'\nimport RowComponent from './components/RowComponent'\nimport FilterCellComponent from './components/FilterCellComponent'\nimport EditCellComponent from './components/EditCellComponent'\nimport CommandComponent from './components/CommandComponent'\nimport PointerState from './plugins/PointerState'\nimport KeyboardController from './plugins/KeyboardController'\nimport uniqid from 'uniqid'\nimport sortBy from 'lodash-es/sortBy'\nimport { linkArray, trimObjectValues } from '../../utils/tools'\nimport useFirebase from '../../firebase/useFirebase'\nimport LoadingPage from '../../components/LoadingPage'\n\nconst defaultContent = () => ({\n  start: '',\n  languages: [],\n  rows: {},\n  metas: {}\n})\n\nconst Page = () => {\n  const { match, history } = useReactRouter()\n  const firebase = useFirebase()\n  const [isLoading, setIsLoading] = useState(true)\n  const [project, setProject] = useState({})\n  const [content, setContent] = useState(defaultContent())\n  const [projectStream, setProjectSteam] = useState()\n  const [contentSteam, setContentSteam] = useState()\n\n  const [filters, setFilters] = useState([])\n  const [pointer, setPointer] = useState()\n\n  useEffect(() => {\n    const steam = firebase.refGroup({ id: match.params.groupId })\n      .child(`projects/${match.params.projectId}`)\n\n    steam\n      .on('value', (snap) => {\n        if (!snap.exists()) {\n          history.push('/no-content')\n          return\n        }\n        setProject(snap.val())\n      })\n\n    if (projectStream === undefined) setProjectSteam(steam)\n\n    return () => {\n      if (projectStream !== undefined) projectStream.off()\n    }\n  // eslint-disable-next-line\n  }, [projectStream])\n\n  useEffect(() => {\n    const steam = firebase.refProjectContents({ id: match.params.projectId })\n\n    steam\n      .on('value', (snap) => {\n        if (!snap.exists()) {\n          setContent(defaultContent())\n        }\n        setContent(snap.val())\n        setIsLoading(false)\n      })\n\n    if (contentSteam === undefined) setContentSteam(steam)\n\n    return () => {\n      if (contentSteam !== undefined) contentSteam.off()\n    }\n  // eslint-disable-next-line\n  }, [contentSteam])\n\n  const columns = ['key']\n    .concat(content.languages)\n    .map(lng => ({ name: lng, title: lng }))\n  const rows = linkArray(Object.values(content.metas || {}), 'id', 'next', content.start)\n    .map(meta => content.rows[meta.id])\n  const getRowId = row => row.id\n  const commitChanges = ({ added, changed, deleted }) => {\n    const ref = firebase.refProjectContents({ id: project.id })\n    if (added) {\n      sortBy(\n        added\n          .concat(rows)\n          .map(row => trimObjectValues(row)),\n        'key'\n      )\n        .forEach((row, index, array) => {\n          if (row.id !== undefined) return\n          row.id = uniqid()\n          ref.child(`rows/${row.id}`).set(row)\n          if (index === 0) {\n            ref.child('start').set(row.id)\n          } else {\n            ref.child(`metas/${array[index - 1].id}/next`).set(row.id)\n          }\n          if (index === array.length - 1) {\n            ref.child(`metas/${row.id}`).set({ id: row.id, canExport: true })\n          } else {\n            ref.child(`metas/${row.id}`).set({ id: row.id, canExport: true, next: array[index + 1].id || '' })\n          }\n        })\n    }\n    if (changed) {\n      rows.forEach((row) => {\n        if (changed[row.id]) {\n          ref.child(`rows/${row.id}`).set({ ...row, ...changed[row.id] })\n        }\n      })\n    }\n    if (deleted) {\n      const deletedSet = new Set(deleted)\n      rows\n        .forEach((row, index, array) => {\n          if (deletedSet.has(row.id)) {\n            if (index === 0) {\n              ref.child('start').set(content.metas[row.id].next || '')\n                .then(() => {\n                  ref.child(`rows/${row.id}`).remove()\n                  ref.child(`metas/${row.id}`).remove()\n                })\n            } else {\n              const prevId = array[index - 1].id\n              ref.child(`metas/${prevId}/next`).set(content.metas[row.id].next || '')\n                .then(() => {\n                  ref.child(`rows/${row.id}`).remove()\n                  ref.child(`metas/${row.id}`).remove()\n                })\n            }\n          }\n        })\n    }\n  }\n\n  const onDuplicateCellClick = (columnName, value) => setFilters([{columnName, operation: 'equal', value}])\n  const EnhanceCellComponent = (props) => (<CellComponent onDuplicateCellClick={onDuplicateCellClick} {...props} />)\n\n  if (isLoading) return (<LoadingPage />)\n\n  return (\n    <Grid\n      rows={rows}\n      columns={columns}\n      getRowId={getRowId}\n    >\n      <PointerState\n        pointer={pointer}\n        onPointerChange={setPointer}\n      />\n      <EditingState\n        onCommitChanges={commitChanges}\n      />\n      <FilteringState\n        filters={filters}\n        onFiltersChange={setFilters}\n      />\n      <IntegratedFiltering />\n      <VirtualTable\n        height={840}\n        tableComponent={TableComponent}\n        cellComponent={EnhanceCellComponent}\n        rowComponent={RowComponent}\n      />\n      <TableHeaderRow />\n      <TableFilterRow\n        showFilterSelector\n        cellComponent={FilterCellComponent}\n      />\n      <TableEditRow\n        cellComponent={EditCellComponent}\n      />\n      <TableEditColumn\n        showAddCommand\n        showEditCommand\n        showDeleteCommand\n        commandComponent={CommandComponent}\n      />\n      <KeyboardController />\n    </Grid>\n  )\n}\n\nexport default Page\n","export { default } from './Page'\n"],"sourceRoot":""}